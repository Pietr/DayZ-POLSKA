local itemsMagaz = 
{
["TRANSPORT"] = {
{"Pełny kanister",3000,1,400,1},
{"Koło",2000,1,400,1},
{"Akumulator",5000,1,800,1},
{"Świeca",1000,1,400,1},
{"Pancerz sam.",7000,1,1000,1},
{"Reflektor",500,1,200,1},
},

["UBRANIA"] = {
{"Kominiarka z czaszką - czarna",1500,1,250,1},
{"Kominiarka - beżowa",700,1,200,1},
{"Kominiarka - czarna",700,1,200,1},
{"Kominiarka - niebieska",700,1,200,1},
{"Kominiarka - zielona",700,1,200,1},
{"Kominiarka - różowa",700,1,200,1},
{"Kominiarka - biała",700,1,200,1},
{"Kominiarka z kamuflażem",700,1,200,1},
{"Maska Dallas",1000,1,300,1},
{"Maska Hoxton",1000,1,300,1},
{"Maska Wilka",1000,1,300,1},
{"Maska",1000,1,300,1},
{"Kask motocyklowy №1",800,1,250,1},
{"Kask motocyklowy №2",800,1,250,1},
{"Kask motocyklowy №3",800,1,250,1},
{"Kask motocyklowy №4",800,1,250,1},
{"Kask motocyklowy №5",800,1,250,1},
{"Kask motocyklowy №6",800,1,250,1},
{"Kask motocyklowy №7",800,1,250,1},	
{"Bandana - kamuflaż (głęboka)",400,1,150,1},
{"Bandana - czarna",400,1,150,1},
{"Bandana - fioletowa",400,1,150,1},
{"Bandana - czerwona",400,1,150,1},
{"Bandana - żółta",400,1,150,1},
{"Bandana - zielona",400,1,150,1},
{"Beret wojskowy - czerwony",600,1,200,1},
{"Beret - czarny",600,1,200,1},
{"Beret ONZ - ciemno niebieski",650,1,200,1},
{"Beret - zielony",650,1,200,1},
{"Бежевый берет Чернарусских сил",500,1,200,1},
{"Panama - niebieska",400,1,150,1},
{"Panama kamuflaż DPM",400,1,150,1},
{"Panama kamuflaż DĄB",400,1,150,1},
{"Panama kamuflaż FLECKTARN",400,1,150,1},
{"Panama - błękitna",400,1,150,1},
{"Panama - zielona",400,1,150,1},
{"Panama - pomarańczowa",400,1,150,1},
{"Panama - czerwona",400,1,150,1},
{"Panama - beżowa",400,1,150,1},

{"Kaptur z kamuflażem №1",1000,1,300,1},
{"Kaptur z kamuflażem №2",1000,1,300,1},
{"Kaptur z kamuflażem №3",1000,1,300,1},
{"Płaszcz z kamuflażem №1",3000,1,500,1},
{"Płaszcz z kamuflażem №2",3000,1,500,1},
{"Płaszcz z kamuflażem №3",3000,1,500,1},

{"Hełm balistyczny - zielony",1000,1,300,1},
{"Hełm balistyczny - czarny",1000,1,300,1},
{"Hełm balistyczny - niebieski",1000,1,300,1},
{"Hełm balistyczny z kamuflażem №1",1000,1,300,1},
{"Hełm balistyczny z kamuflażem №2",1000,1,300,1},
{"Hełm balistyczny z kamuflażem №3",1000,1,300,1},
{"Hełm militarny - zielony",2000,1,500,1},
{"Hełm militarny - czarny",2000,1,500,1},
{"Hełm militarny SWAT",2000,1,500,1},
{"Hełm militarny z kamuflażem",2000,1,500,1},
{"Czapka z nausznikami - czarna",400,1,150,1},
{"Czapka z nausznikami - niebieska",400,1,150,1},
{"Czapka z nausznikami - zielona",400,1,150,1},
{"Kapelusz kowbojski - brązowy",400,1,150,1},
{"Kapelusz kowbojski - czarny",400,1,150,1},
{"Kapelusz kowbojski - ciemny brąz",400,1,150,1},
{"Kapelusz kowbojski - zielony",400,1,150,1},
{"Kapelusz kowbojski - szary",400,1,150,1},
{"Kapelusz kowbojski - biały",400,1,150,1},
{"Czapka z dzianiny - brązowa",300,1,150,1},
{"Czapka z dzianiny - czarna",300,1,150,1},
{"Czapka z dzianiny - niebieska",300,1,150,1},
{"Czapka z dzianiny - ciemno-brązowa",300,1,150,1},
{"Czapka z dzianiny - zielona",300,1,150,1},
{"Czapka z dzianiny - szara",300,1,150,1},
{"Czapka z dzianiny - czerwona",300,1,150,1},
{"Beret z daszkiem - ciemna kratka",400,1,200,1},
{"Beret z daszkiem - ciemny",400,1,200,1},
{"Beret z daszkiem - niebieski",400,1,200,1},
{"Beret z daszkiem - brązowa kratka",400,1,200,1},
{"Beret z daszkiem - brązowy",400,1,200,1},
{"Beret z daszkiem - szary",400,1,200,1},
{"Czapka - szara",400,1,200,1},
{"Beret z daszkiem - czerwony",400,1,200,1},
{"Kask - czarny",450,1,225,1},
{"Kask - niebieski",450,1,225,1},
{"Kask - jasno zielony",450,1,225,1},
{"Kask - zielony",450,1,225,1},
{"Kask - pomarańczowy",450,1,225,1},
{"Kask - czerwony",450,1,225,1},
{"Kask - biały",450,1,225,1},
{"Kask - żółty",450,1,225,1},
{"Kask strażacki - czarny",700,1,250,1},
{"Kask strażacki - czerwony",700,1,250,1},
{"Kask strażacki - biały",700,1,250,1},
{"Kask strażacki - żółty",700,1,250,1},
{"Hełm pilota - czarny",750,1,300,1},
{"Hełm pilota - biały",750,1,300,1},
{"Hełm pilota - zielony",750,1,300,1},

		{"Czapka oficerska",500,1,200,1},
		{"Furażerka",500,1,200,1},
		{"Czapka policyjna",500,1,200,1},
		
		{"Bejsbolówka №1",500,1,200,1},
		{"Bejsbolówka №2",500,1,200,1},
		{"Bejsbolówka №3",500,1,200,1},
		{"Bejsbolówka №4",500,1,200,1},
		{"Bejsbolówka №5",500,1,200,1},
		{"Bejsbolówka №6",500,1,200,1},
		{"Bejsbolówka №7",500,1,200,1},
		{"Bejsbolówka №8",500,1,200,1},
		
		{"Chusta z kamuflażem - DĄB",400,1,150,1},
		{"Chusta - czarna",400,1,150,1},
		{"Chusta - fioletowa",400,1,150,1},
		{"Chusta - czerwona",400,1,150,1},
		{"Chusta - żółta",400,1,150,1},
		{"Chusta - zielona",400,1,150,1},
		
		{"Podwijana czapka - czarna",500,1,200,1},
		{"Podwijana czapka - brązowa",500,1,200,1},
		{"Podwijana czapka - zielona",500,1,200,1},
		{"Podwijana czapka - czerwona",500,1,200,1},
		{"Podwijana czapka - niebieska",500,1,200,1},
		
		{"Pilotka ze słuchawkami",500,1,200,1},
		
		{"Czapka z pomponem - czarna",300,1,150,1},
		{"Czapka z pomponem - niebieska",300,1,150,1},
		{"Czapka z pomponem - brązowa",300,1,150,1},
		{"Czapka z pomponem - czerwona",300,1,150,1},
		{"Czapka z pomponem - zielona",300,1,150,1},
		
		{"Okulary dizajnerskie",700,1,300,1},
		{"Okulary pilotki",1000,1,350,1},
		
		--Броники навески
		{"Kamizelka z futerału i kieszeniami",5000,1,false,false}, -- 10
		{"Kamizelka wstrząsoodporna",2000,1,false,false},
		{"Kamizelka PRESS",3500,1,false,false},
		--12
		{"Kamizelka o dużej pojemności - czarna",7000,1,false,false},
		{"Kamizelka o dużej pojemności - oliwkowa",7000,1,false,false},
		{"Kamizelka o dużej pojemności",7100,1,false,false},
		--8
		{"Kamizelka - czarna",6000,1,false,false},
		{"Kamizelka kamuflaż DPM",6000,1,false,false},
		{"Kamizelka - oliwkowa",6000,1,false,false},
		{"Kamizelka - TANK",6000,1,false,false},
		
		{"Kamizelka PRESS - niebieska",3500,1,false,false},
		--8
		{"Kamizelka o dużej pojemności №2 - czarna",6000,1,false,false},
		{"Kamizelka o dużej pojemności №2 - kamuflaż DPM",6000,1,false,false},
		{"Kamizelka o dużej pojemności №2 - oliwkowa",6000,1,false,false},
		{"Kamizelka o dużej pojemności №2 - TANK",6000,1,false,false},
		
		{"Kamizelka zbrojna z kamuflażem - PRESS",3500,1,false,false},
		--12
		{"Kamizelka o dużej pojemności - oliwkowy kamuflaż",6000,1,false,false},
		--16
		{"Kamizelka SMERSH",10000,1,false,false},
		--8
		{"Kamizelka o dużej pojemności - brązowa",6000,1,false,false},
		
		{"Kamizelka zbrojna z kamuflażem - PRESS №2",3500,1,false,false},
		--8
		{"Kamizelka zbrojna z kamuflażem №1",6000,1,false,false},
		{"Kamizelka zbrojna z kamuflażem №2",6000,1,false,false},
		--Костюми
		{"Strój - brązowy",2000,1,1000,1},
		{"Strój - szary №2",2000,1,1000,1},
		{"Strój górski - zielony",2000,1,1000,1},
		{"Strój górski - PautRev",2000,1,1000,1},
		{"Dresy - czerwone",2000,1,1000,1},
		{"Dresy - czarne",2000,1,1000,1},
		{"Strój wojskowy №1",2000,1,1000,1},
		{"Dresy - niebieskie",2000,1,1000,1},
		{"Strój - szary №2",2000,1,1000,1},
		{"Dresy - zielone",2000,1,1000,1},
		{"Dresy - brązowe",2000,1,1000,1},
		{"Dresy - czarne",2000,1,1000,1},
		{"Kombinezon medyczny - niebieski",2000,1,1000,1},
		{"Strój wojskowy №2",2000,1,1000,1},
		{"Strój wojskowy №3",2000,1,1000,1},
		{"Strój wojskowy №4",2000,1,1000,1},
		{"Strój wojskowy №5",2000,1,1000,1},
		{"Strój wojskowy №6",2000,1,1000,1},
		{"Костюм спортивный (Синий)",2000,1,1000,1},
		{"Strój - czarny",3000,1,1000,1},
		{"Strój TTsKO",3000,1,1000,1},
		{"Strój górski - brązowy",2000,1,1000,1},
		{"Strój górski - lato",2000,1,1000,1},
		{"Kombinezon medyczny - czerwony",2000,1,1000,1},
		{"Strój - orzeł",2000,1,1000,1},

},



["BROŃ"] = {
			{"M4A1",15000,1,5000,1},
			{"M4A1 kamuflaż",16000,1,5000,1},
			{"M4A1 z tłumikiem",17000,1,5000,1},
			{"M4A1 kamuflaż z tłumikiem",18000,1,5000,1},	
			{"AK-101",10000,1,4000,1},
			{"AK-101 z tłumikiem",11000,1,4000,1},
			{"AK-101 kamuflaż",12000,1,4000,1},
			{"AK-101 kamuflaż z tłumikiem",13000,1,4000,1},	
			{"AKM",13000,1,5000,1},
			{"AKM z tłumikiem",14000,1,5000,1},
			{"AKM kamuflaż",15000,1,5000,1},
			{"AKM kamuflaż z tłumikiem",16000,1,5000,1},	
			{"SVD",15000,1,6000,1},
			{"SVD kamuflaż",16000,1,6000,1},	
			{"WSS Wintoriez",16000,1,6000,1},
			{"WSS Wintoriez kamuflaż",17000,1,6000,1},		
			{"AUG",12000,1,5000,1},
			{"AUG z tłumikiem",13000,1,5000,1},		
			{"AK-74",7000,1,3000,1},
			{"AK-74 z tłumikiem",8000,1,3000,1},		
			{"Mosin–Nagant",15000,1,6000,1},
			{"Mosin–Nagant z kamuflażem",16000,1,6000,1},			
			{"SKS",12000,1,5000,1},		
			{"FN FAL",13000,1,5000,1},
			{"FN FAL z tłumikiem",14000,1,5000,1},		
			{"WINCHESTER M70",9000,1,4000,1},			
			{"IZH-43",6000,1,2000,1},	
			{"MP-133",7000,1,3000,1},
			
			{"MP5",7000,1,3000,1},
			{"MP5 z tłumikiem",8000,1,3000,1},
			{"CZ61 SCORPION",5000,1,2000,1},
			{"UMP45",5000,1,2000,1},
			{"M1911",3000,1,1000,1},
			{"M1911 z tłumikiem",3500,1,1000,1},
			{"GLOCK 19",2500,1,1000,1},
			{"GLOCK 19 z tłumikiem",3000,1,1000,1},
			{"MAGNUM",5000,1,2000,1},
			
			{"Nóż myśliwski",1000,1,500,1},
			{"Topór",3000,1,100,1},
			{"Bejsbol",1000,1,500,1},
			{"Łopata",1000,1,500,1},
			{"Kij golfowy",7000,1,500,1},
	
			{"Granat dymny",3000,1,500,1},
			{"Granat hukowy",3000,1,500,1},	
			{"Granat M67",3000,1,500,1},
			
			{"Lornetka",500,1,250,1},
},

["AMUNICJA"] = {
		{"STANAG",500,40,100,40},
		{"AK-MAG",500,30,100,30},
		{"AK-DRUM",500,75,100,75},
		{"SVD-MAG",500,10,100,10},
		{"VSS-MAG",500,10,100,10},
		{"MOSIN-CLIP",500,5,100,5},
		{"SKS-CLIP",500,10,100,10},
		{"FAL-MAG",500,20,100,20},
		{"Gauge Buckshot",200,2,50,2},
		{"MP5-K-MAG",400,30,100,30},
		{"CZ61-MAG",400,30,100,30},
		{"UMP45-MAG",400,25,100,25},
		{"1911-MAG",400,7,100,7},
		{"GLOCK-MAG",400,15,100,15},
		{"MAGNUM-MAG",400,6,100,6},

},

["PLECAKI"] = {
--Рюкзаки 35 слот
		{"Zielony górski plecak",6000,1,false,false},
		{"Czerwony górski plecak",6000,1,false,false},
		{"Pomarańczowy górski plecak",6000,1,false,false},
		{"Niebieski górski plecak",6000,1,false,false},
		{"Górski plecak z kamuflażem",6000,1,false,false},
		--Рюкзак 28 слот 
		{"Plecak Tortilla №1",3000,1,false,false},
		{"Plecak Tortilla №2",3000,1,false,false},
		{"Plecak Tortilla №3",3000,1,false,false},
		{"Plecak Tortilla №4",3000,1,false,false},
		--Рюкзак 30 слот 
		{"Plecak polowy №1",5000,1,false,false},
		{"Plecak polowy №2",5000,1,false,false},
		{"Plecak polowy №3",5000,1,false,false},
		{"Plecak polowy №4",5000,1,false,false},
		{"Plecak polowy №5",5000,1,false,false},
		--Рюкзак 28 слот Marlin
		{"Żółty Drybag",3500,1,false,false},
		{"Zielony Drybag",3500,1,false,false},
		{"Czerwony Drybag",3500,1,false,false},
		{"Pomarańczowy Drybag",3500,1,false,false},
		{"Niebieski Drybag",3500,1,false,false},
		{"Czarny Drybag",3500,1,false,false},
		--Рюкзак 20 слот Талон
		{"Zielony plecak (Taloon)",4000,1,false,false},
		{"Pomarańczowy plecak (Taloon)",4000,1,false,false},
		{"Niebieski plecak (Taloon)",4000,1,false,false},
		{"Fioletowy plecak (Taloon)",4000,1,false,false},
		{"Plecak z kamuflażem (Taloon)",4000,1,false,false},
		--Рюкзак 25 слот M53 Boulder
		{"Plecak szturmowy z kamuflażem",5000,1,false,false},
		{"Czarny szturmowy",5000,1,false,false},
		{"Zielony szturmowy",5000,1,false,false},
		
		{"Plecak SMERSH",1000,1,false,false},
		{"Torba domowa",1500,1,false,false},
		{"Skórzana torba",2000,1,false,false},
		{"Oryginalny skórzany plecak",2000,1,false,false},
		{"Ręcznie robiony plecak",2000,1,false,false},
		{"Ręcznie robiony skórzany plecak",2000,1,false,false},
		{"Teczka dziecięca",1000,1,false,false},
		{"Plecak Coyote",7500,1,false,false},
},
["MEDYKAMENTY"] = {
		{"Bandaż",500,1,150,1},
		{"Płyn fizjologiczny",500,1,150,1},
		{"Termofor",500,1,150,1},
		{"Środki przeciwbólowe",500,1,150,1},
		{"Morfina",500,1,150,1},
		{"Paczka krwii",500,1,150,1},
		{"Anty Rad",500,1,150,1},
		{"Węgiel medyczny",500,1,150,1},
		{"Antybiotyk",500,1,150,1},
		{"Adrenalina",500,1,150,1},
		{"Arbidol",500,1,150,1},
},
["ŻYWNOŚĆ"] = {
		{"Sardynki w puszce (✖)",500,1,150,1},
		{"Puszka spaghetti (✖)",500,1,150,1},
		{"Konserwa z tuńczyka (✖)",500,1,150,1},
		{"Консервированные Персики(✖)",500,1,150,1},
		{"Puszka bekonu (✖)",500,1,150,1},
		{"Surowe mięso",200,1,100,1},
		{"Grilowane mięso",500,1,150,1},
		
		
		{"Ryż",600,1,100,1},
		{"Mleko",300,1,50,1},
		{"Pomidor",200,1,50,1},
		{"Ziemniak",200,1,50,1},
		{"Papryka",200,1,50,1},
		{"Banan",250,1,50,1},
		{"Pomarańcz",250,1,50,1},
		{"Kiwi",250,1,50,1},
		{"Cukinia",200,1,50,1},
		{"Borówki",200,1,50,1},
		{"Żurawina",200,1,50,1},
		{"Gruszka",250,1,50,1},
		{"Jabłko",250,1,50,1},
	
		{"Puszka Coca-Coli",500,1,100,1},
		{"Puszka Pepsi",500,1,100,1},
		{"Kwas chlebowy",500,1,100,1},
		{"Puszka Sprite",500,1,100,1},
		{"Manierka",1000,1,300,1},
		{"Butelka wody",500,1,100,1},
},

["RÓŻNE"] = {
		{"Gogle NV",1000,1,300,1},
		{"Gogle IR",1000,1,300,1},
		{"Mapa",300,1,100,1},
		{"Zapałki",200,1,50,1},
		{"Zegarek",500,1,100,1},
		{"GPS",300,1,100,1},
		{"Narzędzia",1000,1,300,1},
		{"Kompas",200,1,100,1},
		{"Drewno",100,1,50,1},
		{"Raca",500,1,100,1},	
		{"Namiot (wojskowy)",30000,1,5000,1},
		{"Namiot (podróżny)",20000,1,4000,1},
		{"Namiot (samochodowy)",25000,1,4500,1},
		{"Otwieracz",500,1,100,1},	
		
		{"51mm NATO",500,1,100,1},	
		{"М134 Minigun",500,1,100,1},	
		{"BGM-71 TOW",500,1,100,1},	
		
		{"Plan - blok z piasku",500,1,100,1},	
		{"Plan - worki z piaskiem",500,1,100,1},	
		{"Plan - opony",500,1,100,1},	
		{"Plan - przeciwpancerny jeż",500,1,100,1},	
		{"Plan - duży przeciwpancerny jeż",500,1,100,1},	

		{"Mina",500,1,100,1},	
		{"Piasek",500,1,100,1},	
		{"Drut",500,1,100,1},	
		{"Worek",500,1,100,1},	
		{"Opona",500,1,100,1},	
		{"Metal",500,1,100,1},	
		{"Drut kolczasty",500,1,100,1},	
		{"Niedźwiedzia pułapka",500,1,100,1},	
		
},

}

local tabPanel = {}
local buttons = {}
local labels = {}

local maksam07 = 
{ 	
	gridList = {},
	label = {},
	editBox = {},
	button = {},
	comboBox = {},
	CheckBox = {}
}

screenWidth,screenHeight = guiGetScreenSize()
mainWidth,mainHeight = 700,400


function shopInterface()

	shop_window = guiCreateWindow(screenWidth/1-mainWidth/1,screenHeight/1-mainHeight/1,mainWidth,mainHeight,"Магазин",false)
	guiSetVisible(shop_window, false)
    guiSetAlpha(shop_window, 0.95)
	guiWindowSetSizable(shop_window, false)

	
	maksam07.gridList.KatName = guiCreateGridList ( 10, 30, 170, 200, false, shop_window) --96
	guiGridListSetSortingEnabled ( maksam07.gridList.KatName, false )
	guiGridListAddColumn ( maksam07.gridList.KatName, "Kategoria", 0.9 )
	
	
	maksam07.gridList.Weapons = guiCreateGridList ( 180, 30, 520, 330, false, shop_window) --96
	guiGridListSetSortingEnabled ( maksam07.gridList.Weapons, false )
	guiGridListAddColumn ( maksam07.gridList.Weapons, "Przedmiot", 0.4 )
	guiGridListAddColumn ( maksam07.gridList.Weapons, "Cena zakupu", 0.16 )
	guiGridListAddColumn ( maksam07.gridList.Weapons, "Ilość", 0.11 )
	guiGridListAddColumn ( maksam07.gridList.Weapons, "Cena sprzedaży", 0.16 )
	guiGridListAddColumn ( maksam07.gridList.Weapons, "Ilość", 0.11 )
	
	maksam07.label.my = guiCreateLabel(15,270,160,35,"Pieniądze:\n" .. (getElementData(localPlayer, "Pieniądze") or 0),false,shop_window)
	maksam07.label.colPred = guiCreateLabel(15,300,160,35,"",false,shop_window)
	
	maksam07.label.slots = guiCreateLabel(15,330,160,35,"",false,shop_window)
	maksam07.label.slots_treb = guiCreateLabel(15,345,160,35,"",false,shop_window)
	
	
	buttons.buy = guiCreateButton(300, 370, 100, 24, "Kup", false, shop_window)
	guiSetFont(buttons.buy , "default-bold-small")
	
 	buttons.sale = guiCreateButton(410, 370, 100, 24, "Sprzedaj", false, shop_window)
	guiSetFont(buttons.sale , "default-bold-small")

	
	
	buttons.Sair = guiCreateButton(570, 370, 100, 24, "Zamknij", false, shop_window)
	guiSetFont(buttons.Sair , "default-bold-small")

	
	for _, button in pairs(buttons) do 
		guiSetProperty(button, "HoverTextColour", "FFFF0000") 
	end
	
	addEventHandler("onClientGUIClick", maksam07.gridList.KatName, function ( )
		local text = guiGridListGetItemText ( maksam07.gridList.KatName, guiGridListGetSelectedItem ( maksam07.gridList.KatName ), 1 )
		guiGridListClear(maksam07.gridList.Weapons)
		if text == "" then return false end
		for i, value in ipairs(itemsMagaz[text]) do
		local row = guiGridListAddRow ( maksam07.gridList.Weapons )
			guiGridListSetItemText ( maksam07.gridList.Weapons, row, 1, value[1], false, false )
			guiGridListSetItemText ( maksam07.gridList.Weapons, row, 2, value[2], false, false )
			guiGridListSetItemText ( maksam07.gridList.Weapons, row, 3, value[3], false, false )
			guiGridListSetItemText ( maksam07.gridList.Weapons, row, 4, value[4], false, false )
			guiGridListSetItemText ( maksam07.gridList.Weapons, row, 5, value[5], false, false )
		end
	end, false )
	
	
	addEventHandler( "onClientGUIClick", buttons.buy,
	function ( )
		local weapon = guiGridListGetItemText(maksam07.gridList.Weapons, guiGridListGetSelectedItem(maksam07.gridList.Weapons), 1)
		local buy = guiGridListGetItemText(maksam07.gridList.Weapons, guiGridListGetSelectedItem(maksam07.gridList.Weapons), 2)
		local current = guiGridListGetItemText(maksam07.gridList.Weapons, guiGridListGetSelectedItem(maksam07.gridList.Weapons), 3)
		if (not weapon or weapon == "") then return end
			if getPlayerCurrentSlots() + getItemSlots(weapon) <= getPlayerMaxAviableSlots()	then
				if getElementData ( localPlayer, "Pieniądze") >= tonumber(buy) then
					setElementData(localPlayer,weapon,getElementData(localPlayer,weapon)+current)
					setElementData ( localPlayer, "Pieniądze", getElementData ( localPlayer, "Pieniądze" )-buy )
					setElementData(root, "moneyRPMagin", getElementData(root, "moneyRPMagin")+ buy)
					yesMoney(weapon, buy, current)
				else
					notMoney(weapon, buy, current)
				end
			else
				outputChatBox("#FF0000[SKLEP] #FFffffNie masz miejsca w ekwipunku na zakup!", 255, 255, 255 , true)
			end
			
			guiSetText ( maksam07.label.my, "Pieniądze:\n" .. (getElementData(localPlayer, "Pieniądze") or 0) )
	end, false)
	
	
	addEventHandler( "onClientGUIClick", buttons.sale,
	function ( )
		local weapon = guiGridListGetItemText(maksam07.gridList.Weapons, guiGridListGetSelectedItem(maksam07.gridList.Weapons), 1)
		local buy = guiGridListGetItemText(maksam07.gridList.Weapons, guiGridListGetSelectedItem(maksam07.gridList.Weapons), 4)
		local current = guiGridListGetItemText(maksam07.gridList.Weapons, guiGridListGetSelectedItem(maksam07.gridList.Weapons), 5)
		if (not weapon or weapon == "") then return end
			if getElementData ( root, "moneyRPMagin") >= tonumber(buy) then
				if getElementData ( localPlayer, weapon) >= tonumber(current) then
					setElementData(localPlayer,weapon,getElementData(localPlayer,weapon)-current)
					setElementData ( root, "moneyRPMagin", getElementData ( root, "moneyRPMagin" )+buy )
					setElementData(localPlayer, "Pieniądze", getElementData(localPlayer, "Pieniądze")+buy)
					yesMoney1(weapon, buy, current)
				else
					notMoney2(weapon, buy, current)

				end
			else
				notMoney1(weapon, buy, current)
			end
		
			guiSetText ( maksam07.label.my, "Pieniądze:\n" .. (getElementData(localPlayer, "Pieniądze") or 0) )

	
	end, false)

	
	
	addEventHandler( "onClientGUIClick", buttons.Sair,
	function ( )
		guiSetVisible(shop_window,false)
		showCursor(false)
		
		if isTimer(timerMoney) then
			killTimer ( timerMoney )
		end
		
	end, false)
end
addEventHandler("onClientResourceStart", getResourceRootElement(getThisResource()), shopInterface)


function notMoney(weapon, buy, current)
	outputChatBox("#FF0000[SKLEP] #FF0000Masz za mało pieniędzy na zakup #FFFF00"..weapon, 255, 255, 255 , true)
end

function notMoney1(weapon, buy, current)
	outputChatBox("#FF0000[SKLEP] #FF0000Skup nie ma wystarczająco pieniędzy!", 255, 255, 255 , true)
end

function notMoney2(weapon, buy, current)
	outputChatBox("#FF0000[SKLEP] #FF0000Nie masz tylu rzeczy!", 255, 255, 255 , true)
end


function yesMoney(weapon, buy, current)
	outputChatBox("#FF0000[SKLEP] #FFFFFFPomyslnie dokonano zakupu.", 255, 255, 255 , true)
end
 
function yesMoney1(weapon, buy, current)
	outputChatBox("#FF0000[SKLEP] #FFFFFFPomyślnie sprzedano.", 255, 255, 255 , true)
end

function refreshMoney()
	guiSetText ( maksam07.label.my, "Pieniądze:\n" .. (getElementData(localPlayer, "Pieniądze") or 0) )
	
	local weapon = guiGridListGetItemText(maksam07.gridList.Weapons, guiGridListGetSelectedItem(maksam07.gridList.Weapons), 1)
	if (not weapon or weapon == "") then
		guiSetText ( maksam07.label.slots, "")
		guiSetText ( maksam07.label.slots_treb, "")
		guiSetText ( maksam07.label.colPred, "")
		return 
	end
	guiSetText ( maksam07.label.colPred, weapon..": \n" .. (getElementData(localPlayer, weapon) or 0) )
	
	local freeslots = getPlayerMaxAviableSlots()-getPlayerCurrentSlots()
	guiSetText ( maksam07.label.slots, "Zaj: "..getPlayerCurrentSlots().." | Wsz: "..getPlayerMaxAviableSlots().." | Wol: "..getPlayerMaxAviableSlots()-getPlayerCurrentSlots().."")

	guiSetText ( maksam07.label.slots_treb, "Zajmuje: "..getItemSlots(weapon).."")
end


function AbrirJanela2()
	guiSetVisible(shop_window,true)
	showCursor(true)
	
	guiGridListClear(maksam07.gridList.Weapons)
	guiGridListClear(maksam07.gridList.KatName)
	timerMoney = setTimer ( refreshMoney, 50, 0 )
	
	guiSetText ( maksam07.label.my, "Pieniądze:\n" .. (getElementData(localPlayer, "Pieniądze") or 0) )
	guiSetText ( maksam07.label.slots, "")
	guiSetText ( maksam07.label.slots_treb, "")
	
	for key, value in pairs (itemsMagaz) do
		if type(value) == "table" then
			local row = guiGridListAddRow ( maksam07.gridList.KatName )
			guiGridListSetItemText ( maksam07.gridList.KatName, row, 1, key, false, false )
		end
	end
end
addEvent("openWindow",true)
addEventHandler("openWindow", getRootElement(), AbrirJanela2)